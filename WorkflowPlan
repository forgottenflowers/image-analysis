Hereâ€™s a common pipeline:

---

## ðŸ”¹ 1. **Data Acquisition**

* You already did this: phase-contrast tomography at Soleil â†’ raw projection images (`.edf`, `.tif`, `.hdf5`, etc.).
* Metadata often encodes voxel size, exposure, filters, sample-detector distance.

---

## ðŸ”¹ 2. **Reconstruction**

* **Goal:** Turn 2D projections â†’ 3D volume.
* At Soleil, reconstruction is typically done with:

  * **PyHST2** or **PyHST-Tomography** (standard ESRF/SOLEIL pipeline).
  * Sometimes **Paganin phase retrieval** applied during reconstruction for phase-contrast.
* Output: a 3D stack (often **16-bit TIFF** or **HDF5**).

---

## ðŸ”¹ 3. **Pre-Processing**

* Import reconstructed volume into **Fiji/ImageJ**, **Avizo/Amira**, or **Dragonfly**.
* Apply corrections:

  * Ring artifact removal.
  * Beam-hardening correction (if needed).
  * Cropping & rescaling.
  * Denoising (non-local means, median, Gaussian, or wavelet filters).

---

## ðŸ”¹ 4. **Segmentation**

* **Goal:** Separate bone tissue from background/pores/marrow.
* Common methods:

  * Global or adaptive thresholding (Otsu, Yen, or user-defined).
  * Phase-contrast often yields very clear edges â†’ watershed + threshold can work well.
  * Machine learning (e.g. **Trainable Weka in Fiji**, **ilastik**, or **Dragonfly deep learning tools**) if gray levels overlap.

---

## ðŸ”¹ 5. **Post-Segmentation Processing**

* Clean the binary mask:

  * Morphological opening/closing.
  * Hole filling.
  * Remove small objects/noise.
* Sometimes register/align datasets (if multiple scans or regions of interest).

---

## ðŸ”¹ 6. **Quantitative Analysis**

Typical metrics for **bone phase-contrast tomography**:

* **Morphometry:**

  * Bone volume fraction (BV/TV).
  * Trabecular thickness, spacing, number (Tb.Th, Tb.Sp, Tb.N).
  * Cortical thickness.
* **Porosity:** pore volume, distribution, connectivity.
* **3D structure:** anisotropy, orientation tensors, fractal dimension.
* **Surface properties:** surface-to-volume ratio.

Software:

* **BoneJ (Fiji plugin)** â†’ trabecular/cortical analysis.
* **Amira/Avizo** â†’ more advanced morphometry + visualization.
* **Dragonfly, MorphoLibJ, Scikit-image** â†’ open-source options.

---

## ðŸ”¹ 7. **Visualization**

* 3D renderings (isosurfaces, volume rendering) in Amira/Avizo or Paraview.
* Color-coded maps of thickness, density, or strain.
* Export 3D models for simulation (e.g. finite element analysis).

---

## ðŸ”¹ 8. **Archival & Reproducibility**

* Keep both **raw projections** and **reconstructed volumes** (with metadata).
* Store voxel size and imaging parameters alongside results â†’ crucial for quantitative bone metrics.

---
